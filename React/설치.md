# Docker

### 도커를 쓰는 이유

-   프로그램 다운 받는 과정을 간단하게 만들기 위해
-   설치과정이 복잡하고, 에러가 발생이 했었음 (버전이 다르거나, 운영체제 등이 다를경우)

### 도커란?

-   컨테이너를 사용하여 응용프로그램을 더 쉽게 만들고 배포하고 실행할 수 있도록 설계한 도구
-   컨테이너 기반의 오픈소스 가상화 플랫폼이며 생태계
-   서버에서 컨테이너 개념
    컨테이너 안에 다양한 프로그램, 실행환경을 컨테이너로 추상화하고 동일한 인터페이스를
    제공하여 프로그램의 배포 및 관리를 단순하게 해준다. 일반 컨테이너의개념에서 물건을
    손쉽게 운송해주는 것처럼 프로그램을 손쉽게 이동 배포 관리를 할 수 있게 해준다.
    AWS, Azure, Google cloud 등 어디서든 실행 가능하게 해준다.

### 도커를 사용할 때

1. 먼저 도커 CLI에 커맨드를 입력
2. 그러면 도커 서버(도커 Daemon)이 그 커맨드를 받아서 그것에 따라
   이미지를 생성하든 컨테이너를 실행하든 모든 작업을 하게 된다.

### 도커 이미지

-   도커 이미지는 컨테이너를 만들기 위해 필요한 설정이나 종속성들을 갖고 있는 소프트웨어 패키지
-   Dockerhub에 이미 다른 사람들이 만들어 놓은 것을 이용할 수 있으며, 직접 도커 이미지를
    만들어서 사용할 수도 있고 직접 만든 것을 업로드 할 수도 있다.

### 도커 파일이란?

<aside>
💡 도커 이미지를 만들기 위한 설정 파일이며,
컨테이너가 어떻게 행동해야 하는지 대한 설정들을 정의해주는 곳

</aside>

1. 베이스 이미지를 명시

-   베이스이미지란?
    -   도커 이미지는 여러개의 레이어들로 되어있다. 그 중 베이스이미지는 이 이미지의 기반이 되는 부분
    -   레이어는 중간 단계의 이미지

1. 추가적으로 필요한 파일을 다운 받기 위한 몇가지 명령어를 명시
2. 컨테이너 시작 시 실행될 명령어를 명시

FROM

-   이미지 생성 시 기반이 되는 이미지 레이어
-   <이미지 이름> : <태그> 형식으로 작성
-   태그를 안붙이면 자동적으로 가장 최신 것으로 다운받음

RUN

-   도커 이미지가 생성되기 전에 수행할 쉘 명령어

CMD

-   컨테이너가 시작되었을 때 실행할 실행 파일 또는 셀 스크립트
-   해당 명령어는 DockerFile 내 1회만 쓸 수 있다.

### 리액트 파일 연결

```docker
FROM node:16-alpine

WORKDIR /user/src/app

COPY package.json ./

RUN npm install

COPY ./ ./

CMD ["npm", "run","start"]
```

<aside>
💡 터미널에서 포트를 맵핑 해줘야 함
**docker run -p 3000:3000 번호입력**

</aside>
